# EmotiChat 未实现功能清单

> **创建日期**: 2025-11-23
> **基于**: user-requirements-detailed.md
> **状态**: 持续更新

---

## 📊 实现进度概览

### 已完成的核心功能 ✅
- **Phase 0**: 提示词系统（变量、宏、注入、Role适配、后处理）
- **Phase 1.1**: Markdown渲染（代码高亮、LaTeX、表格）
- **Phase 1.2**: Token计数器
- **Phase 1.3**: 多模型支持
- **Phase 1.4**: 消息编辑与重新生成
- **Phase 1.5**: UI美化与响应式设计
- **基础功能**: 角色管理、对话管理、文件锁、Error Boundary

### 完成率
**总体进度**: ~58.5% (根据 todo.md)

---

## 🔴 高优先级未实现功能

### 1. 实时变量系统（浏览器权限）

**需求来源**: user-requirements-detailed.md - 5.2 变量系统

**功能描述**:
- `{{time}}` - 实时获取年月日时分（当前只是占位符）
- `{{location}}` - 实时获取省市（需要地理位置权限）
- `{{device_info}}` - 实时获取设备类型

**当前状态**: ⚠️ 占位符已实现，但未实现真实的浏览器权限获取

**优先级**: 🔴 高

**实现难度**: 中

**预计工作量**: 1-2天

---

---

### 3. 渲染系统 - 特殊字段渲染

**需求来源**: user-requirements-detailed.md - 3.2 特殊字段渲染

**功能描述**:
用户可自定义以下内容的渲染方式：
- 引号包裹 `"这是内容"` → 特殊背景色/高亮
- 括号包裹 `(这是内容)` → 特殊背景色/高亮
- 其他自定义格式

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 中

**预计工作量**: 2-3天

---

### 4. CSS完全自定义工具

**需求来源**: user-requirements-detailed.md - 3.3 CSS完全自定义工具

**功能描述**:
- 需要一个对对话界面CSS完全自定义的工具
- 添加到设置页面
- 让用户可以完全控制对话界面的视觉样式

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 高

**预计工作量**: 3-5天

---

### 5. 流式计时器

**需求来源**: user-requirements-detailed.md - 6.1 流式计时器

**功能描述**:
- 显示流式响应的耗时
- 实时更新计时

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 低

**预计工作量**: 0.5-1天

---

### 6. 思维链可折叠

**需求来源**: user-requirements-detailed.md - 6.2 思维链可折叠

**功能描述**:
- 默认: `<think>` 标签内容为模型思维链
- 功能: 用户可设置是否折叠显示
- 可配置: 给用户设置权限（自定义思维链标签）

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 中

**预计工作量**: 1-2天

---

## 🟡 中优先级未实现功能

### 7. Dev Mode 完善

**需求来源**: user-requirements-detailed.md - 8. Dev Mode

**当前状态**: ⚠️ 已有基础实现（50/50分屏），但功能可能不完整

**需要完善**:
- ⬜ 完整的debug消息显示
- ⬜ 请求体显示
- ⬜ 响应体显示
- ⬜ 性能指标

**优先级**: 🟡 中

**实现难度**: 中

**预计工作量**: 2-3天

---

### 8. 函数调用框架

**需求来源**: user-requirements-detailed.md - 2. 函数调用

**功能描述**:
- 利用模型的函数调用能力
- 实现功能如：计算器、天气查询、搜索等

**当前状态**: ❌ 未实现（todo.md Phase 2.2）

**优先级**: 🟡 中

**实现难度**: 高

**预计工作量**: 5-7天

---

### 9. MCP（Model Context Protocol）集成

**需求来源**: user-requirements-detailed.md - 3. MCP

**功能描述**:
- 参考VS Code扩展管理的样式
- 项目内部可以自由配置JSON
- 有专门配置MCP的页面

**当前状态**: ❌ 未实现（todo.md Phase 2.3）

**优先级**: 🟡 中

**实现难度**: 高

**预计工作量**: 7-10天

---

### 10. JavaScript运行时

**需求来源**: user-requirements-detailed.md - 4. JavaScript

**功能描述**:
- 透过JavaScript来实现一些模型实现不了的东西
- 用户输入什么东西，透过JavaScript来发送给模型特定的提示词
- 实现动态提示词生成

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 高

**预计工作量**: 5-7天

---

### 11. 正则表达式处理

**需求来源**: user-requirements-detailed.md - 5. 正则表达式

**功能描述**:
- 后处理模型的输出或输入
- 可选功能：用户可以开启/关闭
- 可作用于：提示词部分、模型输出、用户输入
- 两种模式：实际修改模式、视觉效果修改模式

**当前状态**: ❌ 未实现

**优先级**: 🟡 中

**实现难度**: 中

**预计工作量**: 3-5天

---

## 🟢 低优先级未实现功能

### 12. 性能优化 - 迁移到SQLite

**需求来源**: todo.md - Phase 3.2

**功能描述**:
- 从JSON文件存储迁移到SQLite
- 提升性能
- 更好的查询能力

**当前状态**: ❌ 未实现

**优先级**: 🟢 低（当前JSON方案工作正常）

**实现难度**: 高

**预计工作量**: 7-10天

---

### 13. 单元测试与E2E测试

**需求来源**: todo.md - Phase 3.1

**功能描述**:
- 为提示词构建器编写单元测试
- 为数据存储层编写单元测试
- 为关键组件编写集成测试
- 实现E2E测试（Playwright）

**当前状态**: ❌ 未实现

**优先级**: 🟢 低（当前手动测试工作正常）

**实现难度**: 高

**预计工作量**: 10-14天

---

### 14. 完整的项目文档

**需求来源**: todo.md - Phase 3.3

**需要编写**:
- 用户指南
- API文档
- 提示词编写指南
- 开发指南
- 示例配置文件和角色卡

**当前状态**: ⚠️ 部分完成（有基础README和技术文档）

**优先级**: 🟢 低

**实现难度**: 中

**预计工作量**: 5-7天

---

## 📝 实施建议

### 推荐的下一步开发顺序

根据用户需求和项目核心价值，建议按以下顺序实施：

#### 第一批（核心体验提升）
1. **角色编辑页面改造** - 2-3天
2. **实时变量系统** - 1-2天
3. **流式计时器** - 0.5-1天
4. **思维链可折叠** - 1-2天

**总计**: ~5-8天

#### 第二批（渲染增强）
1. **特殊字段渲染** - 2-3天
2. **CSS自定义工具** - 3-5天

**总计**: ~5-8天

#### 第三批（高级功能）
1. **Dev Mode完善** - 2-3天
2. **正则表达式处理** - 3-5天
3. **JavaScript运行时** - 5-7天

**总计**: ~10-15天

#### 第四批（扩展能力）
1. **函数调用框架** - 5-7天
2. **MCP集成** - 7-10天

**总计**: ~12-17天

---

## 🎯 总结

### 关键数据
- **高优先级未实现**: 6项
- **中优先级未实现**: 5项
- **低优先级未实现**: 3项
- **总计未实现**: 14项

### 预计完成时间
- **核心功能补全**: ~5-8天
- **全部高优先级**: ~20-30天
- **全部高+中优先级**: ~40-60天
- **全部功能**: ~70-100天

### 建议策略
1. ✅ 优先完成第一批（核心体验提升）
2. ✅ 根据用户反馈决定第二批的优先级
3. ⏸️ 低优先级功能可以在项目稳定后慢慢添加

---

**最后更新**: 2025-11-23
